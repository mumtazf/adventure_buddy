{"ast":null,"code":"import _createClass from \"C:/Users/mumta/crewmates/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _classCallCheck from \"C:/Users/mumta/crewmates/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _regeneratorRuntime from \"C:/Users/mumta/crewmates/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nexport function expiresAt(expiresIn) {\n  var timeNow = Math.round(Date.now() / 1000);\n  return timeNow + expiresIn;\n}\nexport function uuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\nexport var isBrowser = function isBrowser() {\n  return typeof document !== 'undefined';\n};\nvar localStorageWriteTests = {\n  tested: false,\n  writable: false\n};\n/**\r\n * Checks whether localStorage is supported on this browser.\r\n */\n\nexport var supportsLocalStorage = function supportsLocalStorage() {\n  if (!isBrowser()) {\n    return false;\n  }\n\n  try {\n    if (typeof globalThis.localStorage !== 'object') {\n      return false;\n    }\n  } catch (e) {\n    // DOM exception when accessing `localStorage`\n    return false;\n  }\n\n  if (localStorageWriteTests.tested) {\n    return localStorageWriteTests.writable;\n  }\n\n  var randomKey = \"lswt-\".concat(Math.random()).concat(Math.random());\n\n  try {\n    globalThis.localStorage.setItem(randomKey, randomKey);\n    globalThis.localStorage.removeItem(randomKey);\n    localStorageWriteTests.tested = true;\n    localStorageWriteTests.writable = true;\n  } catch (e) {\n    // localStorage can't be written to\n    // https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\n    localStorageWriteTests.tested = true;\n    localStorageWriteTests.writable = false;\n  }\n\n  return localStorageWriteTests.writable;\n};\nexport function getParameterByName(name, url) {\n  var _a;\n\n  if (!url) url = ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.href) || ''; // eslint-disable-next-line no-useless-escape\n\n  name = name.replace(/[\\[\\]]/g, '\\\\$&');\n  var regex = new RegExp('[?&#]' + name + '(=([^&#]*)|&|#|$)'),\n      results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\nexport var resolveFetch = function resolveFetch(customFetch) {\n  var _fetch;\n\n  if (customFetch) {\n    _fetch = customFetch;\n  } else if (typeof fetch === 'undefined') {\n    _fetch = function _fetch() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var _yield$import;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return import('cross-fetch');\n\n              case 2:\n                _context.next = 4;\n                return (_yield$import = _context.sent).fetch.apply(_yield$import, args);\n\n              case 4:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n    };\n  } else {\n    _fetch = fetch;\n  }\n\n  return function () {\n    return _fetch.apply(void 0, arguments);\n  };\n};\nexport var looksLikeFetchResponse = function looksLikeFetchResponse(maybeResponse) {\n  return typeof maybeResponse === 'object' && maybeResponse !== null && 'status' in maybeResponse && 'ok' in maybeResponse && 'json' in maybeResponse && typeof maybeResponse.json === 'function';\n}; // Storage helpers\n\nexport var setItemAsync = function setItemAsync(storage, key, data) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return storage.setItem(key, JSON.stringify(data));\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n};\nexport var getItemAsync = function getItemAsync(storage, key) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    var value;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return storage.getItem(key);\n\n          case 2:\n            value = _context3.sent;\n\n            if (value) {\n              _context3.next = 5;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", null);\n\n          case 5:\n            _context3.prev = 5;\n            return _context3.abrupt(\"return\", JSON.parse(value));\n\n          case 9:\n            _context3.prev = 9;\n            _context3.t0 = _context3[\"catch\"](5);\n            return _context3.abrupt(\"return\", value);\n\n          case 12:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[5, 9]]);\n  }));\n};\nexport var removeItemAsync = function removeItemAsync(storage, key) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return storage.removeItem(key);\n\n          case 2:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n};\nexport function decodeBase64URL(value) {\n  var key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  var base64 = '';\n  var chr1, chr2, chr3;\n  var enc1, enc2, enc3, enc4;\n  var i = 0;\n  value = value.replace('-', '+').replace('_', '/');\n\n  while (i < value.length) {\n    enc1 = key.indexOf(value.charAt(i++));\n    enc2 = key.indexOf(value.charAt(i++));\n    enc3 = key.indexOf(value.charAt(i++));\n    enc4 = key.indexOf(value.charAt(i++));\n    chr1 = enc1 << 2 | enc2 >> 4;\n    chr2 = (enc2 & 15) << 4 | enc3 >> 2;\n    chr3 = (enc3 & 3) << 6 | enc4;\n    base64 = base64 + String.fromCharCode(chr1);\n\n    if (enc3 != 64 && chr2 != 0) {\n      base64 = base64 + String.fromCharCode(chr2);\n    }\n\n    if (enc4 != 64 && chr3 != 0) {\n      base64 = base64 + String.fromCharCode(chr3);\n    }\n  }\n\n  return base64;\n}\n/**\r\n * A deferred represents some asynchronous work that is not yet finished, which\r\n * may or may not culminate in a value.\r\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\r\n */\n\nexport var Deferred = /*#__PURE__*/_createClass(function Deferred() {\n  var _this = this;\n\n  _classCallCheck(this, Deferred);\n\n  // eslint-disable-next-line @typescript-eslint/no-extra-semi\n  ;\n  this.promise = new Deferred.promiseConstructor(function (res, rej) {\n    // eslint-disable-next-line @typescript-eslint/no-extra-semi\n    ;\n    _this.resolve = res;\n    _this.reject = rej;\n  });\n});\nDeferred.promiseConstructor = Promise; // Taken from: https://stackoverflow.com/questions/38552003/how-to-decode-jwt-token-in-javascript-without-using-a-library\n\nexport function decodeJWTPayload(token) {\n  // Regex checks for base64url format\n  var base64UrlRegex = /^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i;\n  var parts = token.split('.');\n\n  if (parts.length !== 3) {\n    throw new Error('JWT is not valid: not a JWT structure');\n  }\n\n  if (!base64UrlRegex.test(parts[1])) {\n    throw new Error('JWT is not valid: payload is not in base64url format');\n  }\n\n  var base64Url = parts[1];\n  return JSON.parse(decodeBase64URL(base64Url));\n}\n/**\r\n * Creates a promise that resolves to null after some time.\r\n */\n\nexport function sleep(time) {\n  return new Promise(function (accept) {\n    setTimeout(function () {\n      return accept(null);\n    }, time);\n  });\n}\n/**\r\n * Converts the provided async function into a retryable function. Each result\r\n * or thrown error is sent to the isRetryable function which should return true\r\n * if the function should run again.\r\n */\n\nexport function retryable(fn, isRetryable) {\n  var _this2 = this;\n\n  var promise = new Promise(function (accept, reject) {\n    // eslint-disable-next-line @typescript-eslint/no-extra-semi\n    ;\n\n    (function () {\n      return __awaiter(_this2, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n        var attempt, result;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                attempt = 0;\n\n              case 1:\n                if (!(attempt < Infinity)) {\n                  _context5.next = 19;\n                  break;\n                }\n\n                _context5.prev = 2;\n                _context5.next = 5;\n                return fn(attempt);\n\n              case 5:\n                result = _context5.sent;\n\n                if (isRetryable(attempt, null, result)) {\n                  _context5.next = 9;\n                  break;\n                }\n\n                accept(result);\n                return _context5.abrupt(\"return\");\n\n              case 9:\n                _context5.next = 16;\n                break;\n\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](2);\n\n                if (isRetryable(attempt, _context5.t0)) {\n                  _context5.next = 16;\n                  break;\n                }\n\n                reject(_context5.t0);\n                return _context5.abrupt(\"return\");\n\n              case 16:\n                attempt++;\n                _context5.next = 1;\n                break;\n\n              case 19:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[2, 11]]);\n      }));\n    })();\n  });\n  return promise;\n}\n\nfunction dec2hex(dec) {\n  return ('0' + dec.toString(16)).substr(-2);\n} // Functions below taken from: https://stackoverflow.com/questions/63309409/creating-a-code-verifier-and-challenge-for-pkce-auth-on-spotify-api-in-reactjs\n\n\nexport function generatePKCEVerifier() {\n  var verifierLength = 56;\n  var array = new Uint32Array(verifierLength);\n\n  if (typeof window.crypto === 'undefined') {\n    throw new Error('PKCE is not supported on devices without WebCrypto API support, please add polyfills');\n  }\n\n  window.crypto.getRandomValues(array);\n  return Array.from(array, dec2hex).join('');\n}\n\nfunction sha256(randomString) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n    var encoder, encodedData, hash, bytes;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            encoder = new TextEncoder();\n            encodedData = encoder.encode(randomString);\n\n            if (!(typeof window.crypto === 'undefined')) {\n              _context6.next = 4;\n              break;\n            }\n\n            throw new Error('PKCE is not supported on devices without WebCrypto API support, please add polyfills');\n\n          case 4:\n            _context6.next = 6;\n            return window.crypto.subtle.digest('SHA-256', encodedData);\n\n          case 6:\n            hash = _context6.sent;\n            bytes = new Uint8Array(hash);\n            return _context6.abrupt(\"return\", Array.from(bytes).map(function (c) {\n              return String.fromCharCode(c);\n            }).join(''));\n\n          case 9:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n}\n\nfunction base64urlencode(str) {\n  return btoa(str).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\n\nexport function generatePKCEChallenge(verifier) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {\n    var hashed;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.next = 2;\n            return sha256(verifier);\n\n          case 2:\n            hashed = _context7.sent;\n            return _context7.abrupt(\"return\", base64urlencode(hashed));\n\n          case 4:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n}","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,OAAM,SAAUA,SAAV,CAAoBC,SAApB,EAAqC;EACzC,IAAMC,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACC,GAAL,KAAa,IAAxB,CAAhB;EACA,OAAOJ,OAAO,GAAGD,SAAjB;AACD;AAED,OAAM,SAAUM,IAAV,GAAc;EAClB,OAAO,uCAAuCC,OAAvC,CAA+C,OAA/C,EAAwD,UAAUC,CAAV,EAAW;IACxE,IAAMC,CAAC,GAAIP,IAAI,CAACQ,MAAL,KAAgB,EAAjB,GAAuB,CAAjC;IAAA,IACEC,CAAC,GAAGH,CAAC,IAAI,GAAL,GAAWC,CAAX,GAAgBA,CAAC,GAAG,GAAL,GAAY,GADjC;IAEA,OAAOE,CAAC,CAACC,QAAF,CAAW,EAAX,CAAP;EACD,CAJM,CAAP;AAKD;AAED,OAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY;EAAA,OAAM,OAAOC,QAAP,KAAoB,WAA1B;AAAA,CAAlB;AAEP,IAAMC,sBAAsB,GAAG;EAC7BC,MAAM,EAAE,KADqB;EAE7BC,QAAQ,EAAE;AAFmB,CAA/B;AAKA;;;;AAGA,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAK;EACvC,IAAI,CAACL,SAAS,EAAd,EAAkB;IAChB,OAAO,KAAP;EACD;;EAED,IAAI;IACF,IAAI,OAAOM,UAAU,CAACC,YAAlB,KAAmC,QAAvC,EAAiD;MAC/C,OAAO,KAAP;IACD;EACF,CAJD,CAIE,OAAOC,CAAP,EAAU;IACV;IACA,OAAO,KAAP;EACD;;EAED,IAAIN,sBAAsB,CAACC,MAA3B,EAAmC;IACjC,OAAOD,sBAAsB,CAACE,QAA9B;EACD;;EAED,IAAMK,SAAS,kBAAWpB,IAAI,CAACQ,MAAL,EAAX,SAA2BR,IAAI,CAACQ,MAAL,EAA3B,CAAf;;EAEA,IAAI;IACFS,UAAU,CAACC,YAAX,CAAwBG,OAAxB,CAAgCD,SAAhC,EAA2CA,SAA3C;IACAH,UAAU,CAACC,YAAX,CAAwBI,UAAxB,CAAmCF,SAAnC;IAEAP,sBAAsB,CAACC,MAAvB,GAAgC,IAAhC;IACAD,sBAAsB,CAACE,QAAvB,GAAkC,IAAlC;EACD,CAND,CAME,OAAOI,CAAP,EAAU;IACV;IACA;IAEAN,sBAAsB,CAACC,MAAvB,GAAgC,IAAhC;IACAD,sBAAsB,CAACE,QAAvB,GAAkC,KAAlC;EACD;;EAED,OAAOF,sBAAsB,CAACE,QAA9B;AACD,CAnCM;AAqCP,OAAM,SAAUQ,kBAAV,CAA6BC,IAA7B,EAA2CC,GAA3C,EAAuD;;;EAC3D,IAAI,CAACA,GAAL,EAAUA,GAAG,GAAG,aAAM,SAAN,UAAM,WAAN,GAAM,MAAN,SAAM,CAAEC,QAAR,MAAgB,IAAhB,IAAgBC,aAAhB,GAAgB,MAAhB,GAAgBA,GAAEC,IAAlB,KAA0B,EAAhC,CADiD,CAE3D;;EACAJ,IAAI,GAAGA,IAAI,CAACnB,OAAL,CAAa,SAAb,EAAwB,MAAxB,CAAP;EACA,IAAMwB,KAAK,GAAG,IAAIC,MAAJ,CAAW,UAAUN,IAAV,GAAiB,mBAA5B,CAAd;EAAA,IACEO,OAAO,GAAGF,KAAK,CAACG,IAAN,CAAWP,GAAX,CADZ;EAEA,IAAI,CAACM,OAAL,EAAc,OAAO,IAAP;EACd,IAAI,CAACA,OAAO,CAAC,CAAD,CAAZ,EAAiB,OAAO,EAAP;EACjB,OAAOE,kBAAkB,CAACF,OAAO,CAAC,CAAD,CAAP,CAAW1B,OAAX,CAAmB,KAAnB,EAA0B,GAA1B,CAAD,CAAzB;AACD;AAID,OAAO,IAAM6B,YAAY,GAAG,SAAfA,YAAe,CAACC,WAAD,EAA+B;EACzD,IAAIC,MAAJ;;EACA,IAAID,WAAJ,EAAiB;IACfC,MAAM,GAAGD,WAAT;EACD,CAFD,MAEO,IAAI,OAAOE,KAAP,KAAiB,WAArB,EAAkC;IACvCD,MAAM,GAAG;MAAA,kCAAUE,IAAV;QAAUA,IAAV;MAAA;;MAAA,OAAkBC;QAAA;;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAQ,OAAM,OAAO,aAAP,CAAN;;cAAR;gBAAA;gBAAC,uCAAoCF,KAApC,sBAA6CC,IAA7C;;cAAD;gBAAA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,GAAlB;IAAA,CAAT;EACD,CAFM,MAEA;IACLF,MAAM,GAAGC,KAAT;EACD;;EACD,OAAO;IAAA,OAAaD,MAAM,MAAN,mBAAb;EAAA,CAAP;AACD,CAVM;AAYP,OAAO,IAAMI,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,aAAD,EAAsD;EAC1F,OACE,OAAOA,aAAP,KAAyB,QAAzB,IACAA,aAAa,KAAK,IADlB,IAEA,YAAYA,aAFZ,IAGA,QAAQA,aAHR,IAIA,UAAUA,aAJV,IAKA,OAAQA,aAAqB,CAACC,IAA9B,KAAuC,UANzC;AAQD,CATM,C,CAWP;;AACA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAC1BC,OAD0B,EAE1BC,GAF0B,EAG1BC,IAH0B;EAAA,OAITP;IAAA;MAAA;QAAA;UAAA;YAAA;YACjB,OAAMK,OAAO,CAACvB,OAAR,CAAgBwB,GAAhB,EAAqBE,IAAI,CAACC,SAAL,CAAeF,IAAf,CAArB,CAAN;;UADiB;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,GAJS;AAAA,CAArB;AAQP,OAAO,IAAMG,YAAY,GAAG,SAAfA,YAAe,CAAOL,OAAP,EAAkCC,GAAlC;EAAA,OAAmEN;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAC/E,OAAMK,OAAO,CAACM,OAAR,CAAgBL,GAAhB,CAAN;;UAD+E;YACvFM,KADuF;;YAAA,IAGxFA,KAHwF;cAAA;cAAA;YAAA;;YAAA,kCAIpF,IAJoF;;UAAA;YAAA;YAAA,kCAQpFJ,IAAI,CAACK,KAAL,CAAWD,KAAX,CARoF;;UAAA;YAAA;YAAA;YAAA,kCAUpFA,KAVoF;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,GAAnE;AAAA,CAArB;AAcP,OAAO,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAAOT,OAAP,EAAkCC,GAAlC;EAAA,OAAgEN;IAAA;MAAA;QAAA;UAAA;YAAA;YAC7F,OAAMK,OAAO,CAACtB,UAAR,CAAmBuB,GAAnB,CAAN;;UAD6F;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,GAAhE;AAAA,CAAxB;AAIP,OAAM,SAAUS,eAAV,CAA0BH,KAA1B,EAAuC;EAC3C,IAAMN,GAAG,GAAG,mEAAZ;EACA,IAAIU,MAAM,GAAG,EAAb;EACA,IAAIC,IAAJ,EAAUC,IAAV,EAAgBC,IAAhB;EACA,IAAIC,IAAJ,EAAUC,IAAV,EAAgBC,IAAhB,EAAsBC,IAAtB;EACA,IAAIC,CAAC,GAAG,CAAR;EACAZ,KAAK,GAAGA,KAAK,CAAC9C,OAAN,CAAc,GAAd,EAAmB,GAAnB,EAAwBA,OAAxB,CAAgC,GAAhC,EAAqC,GAArC,CAAR;;EAEA,OAAO0D,CAAC,GAAGZ,KAAK,CAACa,MAAjB,EAAyB;IACvBL,IAAI,GAAGd,GAAG,CAACoB,OAAJ,CAAYd,KAAK,CAACe,MAAN,CAAaH,CAAC,EAAd,CAAZ,CAAP;IACAH,IAAI,GAAGf,GAAG,CAACoB,OAAJ,CAAYd,KAAK,CAACe,MAAN,CAAaH,CAAC,EAAd,CAAZ,CAAP;IACAF,IAAI,GAAGhB,GAAG,CAACoB,OAAJ,CAAYd,KAAK,CAACe,MAAN,CAAaH,CAAC,EAAd,CAAZ,CAAP;IACAD,IAAI,GAAGjB,GAAG,CAACoB,OAAJ,CAAYd,KAAK,CAACe,MAAN,CAAaH,CAAC,EAAd,CAAZ,CAAP;IACAP,IAAI,GAAIG,IAAI,IAAI,CAAT,GAAeC,IAAI,IAAI,CAA9B;IACAH,IAAI,GAAI,CAACG,IAAI,GAAG,EAAR,KAAe,CAAhB,GAAsBC,IAAI,IAAI,CAArC;IACAH,IAAI,GAAI,CAACG,IAAI,GAAG,CAAR,KAAc,CAAf,GAAoBC,IAA3B;IACAP,MAAM,GAAGA,MAAM,GAAGY,MAAM,CAACC,YAAP,CAAoBZ,IAApB,CAAlB;;IAEA,IAAIK,IAAI,IAAI,EAAR,IAAcJ,IAAI,IAAI,CAA1B,EAA6B;MAC3BF,MAAM,GAAGA,MAAM,GAAGY,MAAM,CAACC,YAAP,CAAoBX,IAApB,CAAlB;IACD;;IACD,IAAIK,IAAI,IAAI,EAAR,IAAcJ,IAAI,IAAI,CAA1B,EAA6B;MAC3BH,MAAM,GAAGA,MAAM,GAAGY,MAAM,CAACC,YAAP,CAAoBV,IAApB,CAAlB;IACD;EACF;;EACD,OAAOH,MAAP;AACD;AAED;;;;;;AAKA,WAAac,QAAb,6BASE;EAAA;;EAAA;;EACE;EACA;EAAE,KAAaC,OAAb,GAAuB,IAAID,QAAQ,CAACE,kBAAb,CAAgC,UAACC,GAAD,EAAMC,GAAN,EAAa;IACpE;IACA;IAAE,KAAY,CAACC,OAAb,GAAuBF,GAAvB;IAEA,KAAY,CAACG,MAAb,GAAsBF,GAAtB;EACH,CALwB,CAAvB;AAMH,CAjBH;AACgBJ,8BAAyCO,OAAzC,C,CAmBhB;;AACA,OAAM,SAAUC,gBAAV,CAA2BC,KAA3B,EAAwC;EAC5C;EACA,IAAMC,cAAc,GAAG,6DAAvB;EAEA,IAAMC,KAAK,GAAGF,KAAK,CAACG,KAAN,CAAY,GAAZ,CAAd;;EAEA,IAAID,KAAK,CAAChB,MAAN,KAAiB,CAArB,EAAwB;IACtB,MAAM,IAAIkB,KAAJ,CAAU,uCAAV,CAAN;EACD;;EAED,IAAI,CAACH,cAAc,CAACI,IAAf,CAAoBH,KAAK,CAAC,CAAD,CAAzB,CAAL,EAAoC;IAClC,MAAM,IAAIE,KAAJ,CAAU,sDAAV,CAAN;EACD;;EAED,IAAME,SAAS,GAAGJ,KAAK,CAAC,CAAD,CAAvB;EACA,OAAOjC,IAAI,CAACK,KAAL,CAAWE,eAAe,CAAC8B,SAAD,CAA1B,CAAP;AACD;AAED;;;;AAGA,OAAM,SAAUC,KAAV,CAAgBC,IAAhB,EAA4B;EAChC,OAAO,IAAIV,OAAJ,CAAY,UAACW,MAAD,EAAW;IAC5BC,UAAU,CAAC;MAAA,OAAMD,MAAM,CAAC,IAAD,CAAZ;IAAA,CAAD,EAAqBD,IAArB,CAAV;EACD,CAFM,CAAP;AAGD;AAED;;;;;;AAKA,OAAM,SAAUG,SAAV,CACJC,EADI,EAEJC,WAFI,EAEoE;EAAA;;EAExE,IAAMrB,OAAO,GAAG,IAAIM,OAAJ,CAAe,UAACW,MAAD,EAASZ,MAAT,EAAmB;IAChD;IACA;;IAAC,CAAC;MAAA,OAAWpC;QAAA;QAAA;UAAA;YAAA;cAAA;gBACFqD,OADE,GACQ,CADR;;cAAA;gBAAA,MACWA,OAAO,GAAGC,QADrB;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA;gBAGQ,OAAMH,EAAE,CAACE,OAAD,CAAR;;cAHR;gBAGDE,MAHC;;gBAAA,IAKFH,WAAW,CAACC,OAAD,EAAU,IAAV,EAAgBE,MAAhB,CALT;kBAAA;kBAAA;gBAAA;;gBAMLP,MAAM,CAACO,MAAD,CAAN;gBANK;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;;gBAAA,IAUFH,WAAW,CAACC,OAAD,eAVT;kBAAA;kBAAA;gBAAA;;gBAWLjB,MAAM,cAAN;gBAXK;;cAAA;gBAC+BiB,OAAO,EADtC;gBAAA;gBAAA;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,GAAX;IAAA,CAAD;EAiBF,CAnBe,CAAhB;EAqBA,OAAOtB,OAAP;AACD;;AAED,SAASyB,OAAT,CAAiBC,GAAjB,EAA4B;EAC1B,OAAO,CAAC,MAAMA,GAAG,CAACtF,QAAJ,CAAa,EAAb,CAAP,EAAyBuF,MAAzB,CAAgC,CAAC,CAAjC,CAAP;AACD,C,CAED;;;AACA,OAAM,SAAUC,oBAAV,GAA8B;EAClC,IAAMC,cAAc,GAAG,EAAvB;EACA,IAAMC,KAAK,GAAG,IAAIC,WAAJ,CAAgBF,cAAhB,CAAd;;EACA,IAAI,OAAOG,MAAM,CAACC,MAAd,KAAyB,WAA7B,EAA0C;IACxC,MAAM,IAAIrB,KAAJ,CACJ,sFADI,CAAN;EAGD;;EACDoB,MAAM,CAACC,MAAP,CAAcC,eAAd,CAA8BJ,KAA9B;EACA,OAAOK,KAAK,CAACC,IAAN,CAAWN,KAAX,EAAkBL,OAAlB,EAA2BY,IAA3B,CAAgC,EAAhC,CAAP;AACD;;AAED,SAAeC,MAAf,CAAsBC,YAAtB,EAA0C;;;;;;;YAClCC,UAAU,IAAIC,WAAJ;YACVC,cAAcF,OAAO,CAACG,MAAR,CAAeJ,YAAf;;kBAChB,OAAOP,MAAM,CAACC,MAAd,KAAyB;;;;;kBACrB,IAAIrB,KAAJ,CACJ,sFADI;;;;YAIK,OAAMoB,MAAM,CAACC,MAAP,CAAcW,MAAd,CAAqBC,MAArB,CAA4B,SAA5B,EAAuCH,WAAvC,CAAN;;;YAAPI;YACAC,QAAQ,IAAIC,UAAJ,CAAeF,IAAf;8CAEPX,KAAK,CAACC,IAAN,CAAWW,KAAX,EACJE,GADI,CACA,UAACjH,CAAD;cAAA,OAAO6D,MAAM,CAACC,YAAP,CAAoB9D,CAApB,CAAP;YAAA,CADA,EAEJqG,IAFI,CAEC,EAFD;;;;;;;;;AAGR;;AAED,SAASa,eAAT,CAAyBC,GAAzB,EAAoC;EAClC,OAAOC,IAAI,CAACD,GAAD,CAAJ,CAAUpH,OAAV,CAAkB,KAAlB,EAAyB,GAAzB,EAA8BA,OAA9B,CAAsC,KAAtC,EAA6C,GAA7C,EAAkDA,OAAlD,CAA0D,KAA1D,EAAiE,EAAjE,CAAP;AACD;;AAED,OAAM,SAAgBsH,qBAAhB,CAAsCC,QAAtC,EAAsD;;;;;;;;YAC3C,OAAMhB,MAAM,CAACgB,QAAD,CAAZ;;;YAATC;8CACCL,eAAe,CAACK,MAAD;;;;;;;;;AACvB","names":["expiresAt","expiresIn","timeNow","Math","round","Date","now","uuid","replace","c","r","random","v","toString","isBrowser","document","localStorageWriteTests","tested","writable","supportsLocalStorage","globalThis","localStorage","e","randomKey","setItem","removeItem","getParameterByName","name","url","location","_a","href","regex","RegExp","results","exec","decodeURIComponent","resolveFetch","customFetch","_fetch","fetch","args","__awaiter","looksLikeFetchResponse","maybeResponse","json","setItemAsync","storage","key","data","JSON","stringify","getItemAsync","getItem","value","parse","removeItemAsync","decodeBase64URL","base64","chr1","chr2","chr3","enc1","enc2","enc3","enc4","i","length","indexOf","charAt","String","fromCharCode","Deferred","promise","promiseConstructor","res","rej","resolve","reject","Promise","decodeJWTPayload","token","base64UrlRegex","parts","split","Error","test","base64Url","sleep","time","accept","setTimeout","retryable","fn","isRetryable","attempt","Infinity","result","dec2hex","dec","substr","generatePKCEVerifier","verifierLength","array","Uint32Array","window","crypto","getRandomValues","Array","from","join","sha256","randomString","encoder","TextEncoder","encodedData","encode","subtle","digest","hash","bytes","Uint8Array","map","base64urlencode","str","btoa","generatePKCEChallenge","verifier","hashed"],"sources":["C:\\Users\\mumta\\crewmates\\client\\node_modules\\@supabase\\gotrue-js\\src\\lib\\helpers.ts"],"sourcesContent":["import { SupportedStorage } from './types'\r\nexport function expiresAt(expiresIn: number) {\r\n  const timeNow = Math.round(Date.now() / 1000)\r\n  return timeNow + expiresIn\r\n}\r\n\r\nexport function uuid() {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n    const r = (Math.random() * 16) | 0,\r\n      v = c == 'x' ? r : (r & 0x3) | 0x8\r\n    return v.toString(16)\r\n  })\r\n}\r\n\r\nexport const isBrowser = () => typeof document !== 'undefined'\r\n\r\nconst localStorageWriteTests = {\r\n  tested: false,\r\n  writable: false,\r\n}\r\n\r\n/**\r\n * Checks whether localStorage is supported on this browser.\r\n */\r\nexport const supportsLocalStorage = () => {\r\n  if (!isBrowser()) {\r\n    return false\r\n  }\r\n\r\n  try {\r\n    if (typeof globalThis.localStorage !== 'object') {\r\n      return false\r\n    }\r\n  } catch (e) {\r\n    // DOM exception when accessing `localStorage`\r\n    return false\r\n  }\r\n\r\n  if (localStorageWriteTests.tested) {\r\n    return localStorageWriteTests.writable\r\n  }\r\n\r\n  const randomKey = `lswt-${Math.random()}${Math.random()}`\r\n\r\n  try {\r\n    globalThis.localStorage.setItem(randomKey, randomKey)\r\n    globalThis.localStorage.removeItem(randomKey)\r\n\r\n    localStorageWriteTests.tested = true\r\n    localStorageWriteTests.writable = true\r\n  } catch (e) {\r\n    // localStorage can't be written to\r\n    // https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\r\n\r\n    localStorageWriteTests.tested = true\r\n    localStorageWriteTests.writable = false\r\n  }\r\n\r\n  return localStorageWriteTests.writable\r\n}\r\n\r\nexport function getParameterByName(name: string, url?: string) {\r\n  if (!url) url = window?.location?.href || ''\r\n  // eslint-disable-next-line no-useless-escape\r\n  name = name.replace(/[\\[\\]]/g, '\\\\$&')\r\n  const regex = new RegExp('[?&#]' + name + '(=([^&#]*)|&|#|$)'),\r\n    results = regex.exec(url)\r\n  if (!results) return null\r\n  if (!results[2]) return ''\r\n  return decodeURIComponent(results[2].replace(/\\+/g, ' '))\r\n}\r\n\r\ntype Fetch = typeof fetch\r\n\r\nexport const resolveFetch = (customFetch?: Fetch): Fetch => {\r\n  let _fetch: Fetch\r\n  if (customFetch) {\r\n    _fetch = customFetch\r\n  } else if (typeof fetch === 'undefined') {\r\n    _fetch = async (...args) => await (await import('cross-fetch')).fetch(...args)\r\n  } else {\r\n    _fetch = fetch\r\n  }\r\n  return (...args) => _fetch(...args)\r\n}\r\n\r\nexport const looksLikeFetchResponse = (maybeResponse: unknown): maybeResponse is Response => {\r\n  return (\r\n    typeof maybeResponse === 'object' &&\r\n    maybeResponse !== null &&\r\n    'status' in maybeResponse &&\r\n    'ok' in maybeResponse &&\r\n    'json' in maybeResponse &&\r\n    typeof (maybeResponse as any).json === 'function'\r\n  )\r\n}\r\n\r\n// Storage helpers\r\nexport const setItemAsync = async (\r\n  storage: SupportedStorage,\r\n  key: string,\r\n  data: any\r\n): Promise<void> => {\r\n  await storage.setItem(key, JSON.stringify(data))\r\n}\r\n\r\nexport const getItemAsync = async (storage: SupportedStorage, key: string): Promise<unknown> => {\r\n  const value = await storage.getItem(key)\r\n\r\n  if (!value) {\r\n    return null\r\n  }\r\n\r\n  try {\r\n    return JSON.parse(value)\r\n  } catch {\r\n    return value\r\n  }\r\n}\r\n\r\nexport const removeItemAsync = async (storage: SupportedStorage, key: string): Promise<void> => {\r\n  await storage.removeItem(key)\r\n}\r\n\r\nexport function decodeBase64URL(value: string): string {\r\n  const key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\r\n  let base64 = ''\r\n  let chr1, chr2, chr3\r\n  let enc1, enc2, enc3, enc4\r\n  let i = 0\r\n  value = value.replace('-', '+').replace('_', '/')\r\n\r\n  while (i < value.length) {\r\n    enc1 = key.indexOf(value.charAt(i++))\r\n    enc2 = key.indexOf(value.charAt(i++))\r\n    enc3 = key.indexOf(value.charAt(i++))\r\n    enc4 = key.indexOf(value.charAt(i++))\r\n    chr1 = (enc1 << 2) | (enc2 >> 4)\r\n    chr2 = ((enc2 & 15) << 4) | (enc3 >> 2)\r\n    chr3 = ((enc3 & 3) << 6) | enc4\r\n    base64 = base64 + String.fromCharCode(chr1)\r\n\r\n    if (enc3 != 64 && chr2 != 0) {\r\n      base64 = base64 + String.fromCharCode(chr2)\r\n    }\r\n    if (enc4 != 64 && chr3 != 0) {\r\n      base64 = base64 + String.fromCharCode(chr3)\r\n    }\r\n  }\r\n  return base64\r\n}\r\n\r\n/**\r\n * A deferred represents some asynchronous work that is not yet finished, which\r\n * may or may not culminate in a value.\r\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\r\n */\r\nexport class Deferred<T = any> {\r\n  public static promiseConstructor: PromiseConstructor = Promise\r\n\r\n  public readonly promise!: PromiseLike<T>\r\n\r\n  public readonly resolve!: (value?: T | PromiseLike<T>) => void\r\n\r\n  public readonly reject!: (reason?: any) => any\r\n\r\n  public constructor() {\r\n    // eslint-disable-next-line @typescript-eslint/no-extra-semi\r\n    ;(this as any).promise = new Deferred.promiseConstructor((res, rej) => {\r\n      // eslint-disable-next-line @typescript-eslint/no-extra-semi\r\n      ;(this as any).resolve = res\r\n      // eslint-disable-next-line @typescript-eslint/no-extra-semi\r\n      ;(this as any).reject = rej\r\n    })\r\n  }\r\n}\r\n\r\n// Taken from: https://stackoverflow.com/questions/38552003/how-to-decode-jwt-token-in-javascript-without-using-a-library\r\nexport function decodeJWTPayload(token: string) {\r\n  // Regex checks for base64url format\r\n  const base64UrlRegex = /^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i\r\n\r\n  const parts = token.split('.')\r\n\r\n  if (parts.length !== 3) {\r\n    throw new Error('JWT is not valid: not a JWT structure')\r\n  }\r\n\r\n  if (!base64UrlRegex.test(parts[1])) {\r\n    throw new Error('JWT is not valid: payload is not in base64url format')\r\n  }\r\n\r\n  const base64Url = parts[1]\r\n  return JSON.parse(decodeBase64URL(base64Url))\r\n}\r\n\r\n/**\r\n * Creates a promise that resolves to null after some time.\r\n */\r\nexport function sleep(time: number): Promise<null> {\r\n  return new Promise((accept) => {\r\n    setTimeout(() => accept(null), time)\r\n  })\r\n}\r\n\r\n/**\r\n * Converts the provided async function into a retryable function. Each result\r\n * or thrown error is sent to the isRetryable function which should return true\r\n * if the function should run again.\r\n */\r\nexport function retryable<T>(\r\n  fn: (attempt: number) => Promise<T>,\r\n  isRetryable: (attempt: number, error: any | null, result?: T) => boolean\r\n): Promise<T> {\r\n  const promise = new Promise<T>((accept, reject) => {\r\n    // eslint-disable-next-line @typescript-eslint/no-extra-semi\r\n    ;(async () => {\r\n      for (let attempt = 0; attempt < Infinity; attempt++) {\r\n        try {\r\n          const result = await fn(attempt)\r\n\r\n          if (!isRetryable(attempt, null, result)) {\r\n            accept(result)\r\n            return\r\n          }\r\n        } catch (e: any) {\r\n          if (!isRetryable(attempt, e)) {\r\n            reject(e)\r\n            return\r\n          }\r\n        }\r\n      }\r\n    })()\r\n  })\r\n\r\n  return promise\r\n}\r\n\r\nfunction dec2hex(dec: number) {\r\n  return ('0' + dec.toString(16)).substr(-2)\r\n}\r\n\r\n// Functions below taken from: https://stackoverflow.com/questions/63309409/creating-a-code-verifier-and-challenge-for-pkce-auth-on-spotify-api-in-reactjs\r\nexport function generatePKCEVerifier() {\r\n  const verifierLength = 56\r\n  const array = new Uint32Array(verifierLength)\r\n  if (typeof window.crypto === 'undefined') {\r\n    throw new Error(\r\n      'PKCE is not supported on devices without WebCrypto API support, please add polyfills'\r\n    )\r\n  }\r\n  window.crypto.getRandomValues(array)\r\n  return Array.from(array, dec2hex).join('')\r\n}\r\n\r\nasync function sha256(randomString: string) {\r\n  const encoder = new TextEncoder()\r\n  const encodedData = encoder.encode(randomString)\r\n  if (typeof window.crypto === 'undefined') {\r\n    throw new Error(\r\n      'PKCE is not supported on devices without WebCrypto API support, please add polyfills'\r\n    )\r\n  }\r\n  const hash = await window.crypto.subtle.digest('SHA-256', encodedData)\r\n  const bytes = new Uint8Array(hash)\r\n\r\n  return Array.from(bytes)\r\n    .map((c) => String.fromCharCode(c))\r\n    .join('')\r\n}\r\n\r\nfunction base64urlencode(str: string) {\r\n  return btoa(str).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '')\r\n}\r\n\r\nexport async function generatePKCEChallenge(verifier: string) {\r\n  const hashed = await sha256(verifier)\r\n  return base64urlencode(hashed)\r\n}\r\n"]},"metadata":{},"sourceType":"module"}