{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/mumta/crewmates/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { expiresAt, looksLikeFetchResponse } from './helpers';\nimport { AuthApiError, AuthRetryableFetchError, AuthUnknownError } from './errors';\n\nvar _getErrorMessage = function _getErrorMessage(err) {\n  return err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\n};\n\nvar handleError = function handleError(error, reject) {\n  return __awaiter(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var NETWORK_ERROR_CODES;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            NETWORK_ERROR_CODES = [502, 503, 504];\n\n            if (!looksLikeFetchResponse(error)) {\n              reject(new AuthRetryableFetchError(_getErrorMessage(error), 0));\n            } else if (NETWORK_ERROR_CODES.includes(error.status)) {\n              // status in 500...599 range - server had an error, request might be retryed.\n              reject(new AuthRetryableFetchError(_getErrorMessage(error), error.status));\n            } else {\n              // got a response from server that is not in the 500...599 range - should not retry\n              error.json().then(function (err) {\n                reject(new AuthApiError(_getErrorMessage(err), error.status || 500));\n              }).catch(function (e) {\n                // not a valid json response\n                reject(new AuthUnknownError(_getErrorMessage(e), e));\n              });\n            }\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n};\n\nvar _getRequestParams = function _getRequestParams(method, options, parameters, body) {\n  var params = {\n    method: method,\n    headers: (options === null || options === void 0 ? void 0 : options.headers) || {}\n  };\n\n  if (method === 'GET') {\n    return params;\n  }\n\n  params.headers = Object.assign({\n    'Content-Type': 'application/json;charset=UTF-8'\n  }, options === null || options === void 0 ? void 0 : options.headers);\n  params.body = JSON.stringify(body);\n  return Object.assign(Object.assign({}, params), parameters);\n};\n\nexport function _request(fetcher, method, url, options) {\n  var _a;\n\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var headers, qs, queryString, data;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            headers = Object.assign({}, options === null || options === void 0 ? void 0 : options.headers);\n\n            if (options === null || options === void 0 ? void 0 : options.jwt) {\n              headers['Authorization'] = \"Bearer \".concat(options.jwt);\n            }\n\n            qs = (_a = options === null || options === void 0 ? void 0 : options.query) !== null && _a !== void 0 ? _a : {};\n\n            if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n              qs['redirect_to'] = options.redirectTo;\n            }\n\n            queryString = Object.keys(qs).length ? '?' + new URLSearchParams(qs).toString() : '';\n            _context2.next = 7;\n            return _handleRequest(fetcher, method, url + queryString, {\n              headers: headers,\n              noResolveJson: options === null || options === void 0 ? void 0 : options.noResolveJson\n            }, {}, options === null || options === void 0 ? void 0 : options.body);\n\n          case 7:\n            data = _context2.sent;\n            return _context2.abrupt(\"return\", (options === null || options === void 0 ? void 0 : options.xform) ? options === null || options === void 0 ? void 0 : options.xform(data) : {\n              data: Object.assign({}, data),\n              error: null\n            });\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n}\n\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n  return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            return _context3.abrupt(\"return\", new Promise(function (resolve, reject) {\n              fetcher(url, _getRequestParams(method, options, parameters, body)).then(function (result) {\n                if (!result.ok) throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson) return result;\n                return result.json();\n              }).then(function (data) {\n                return resolve(data);\n              }).catch(function (error) {\n                return handleError(error, reject);\n              });\n            }));\n\n          case 1:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n}\n\nexport function _sessionResponse(data) {\n  var _a;\n\n  var session = null;\n\n  if (hasSession(data)) {\n    session = Object.assign({}, data);\n    session.expires_at = expiresAt(data.expires_in);\n  }\n\n  var user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n  return {\n    data: {\n      session: session,\n      user: user\n    },\n    error: null\n  };\n}\nexport function _userResponse(data) {\n  var _a;\n\n  var user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n  return {\n    data: {\n      user: user\n    },\n    error: null\n  };\n}\nexport function _ssoResponse(data) {\n  return {\n    data: data,\n    error: null\n  };\n}\nexport function _generateLinkResponse(data) {\n  var action_link = data.action_link,\n      email_otp = data.email_otp,\n      hashed_token = data.hashed_token,\n      redirect_to = data.redirect_to,\n      verification_type = data.verification_type,\n      rest = __rest(data, [\"action_link\", \"email_otp\", \"hashed_token\", \"redirect_to\", \"verification_type\"]);\n\n  var properties = {\n    action_link: action_link,\n    email_otp: email_otp,\n    hashed_token: hashed_token,\n    redirect_to: redirect_to,\n    verification_type: verification_type\n  };\n  var user = Object.assign({}, rest);\n  return {\n    data: {\n      properties: properties,\n      user: user\n    },\n    error: null\n  };\n}\nexport function _noResolveJsonResponse(data) {\n  return data;\n}\n/**\r\n * hasSession checks if the response object contains a valid session\r\n * @param data A response object\r\n * @returns true if a session is in the response\r\n */\n\nfunction hasSession(data) {\n  return data.access_token && data.refresh_token && data.expires_in;\n}","map":{"version":3,"mappings":"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","names":["expiresAt","looksLikeFetchResponse","AuthApiError","AuthRetryableFetchError","AuthUnknownError","_getErrorMessage","err","msg","message","error_description","error","JSON","stringify","handleError","reject","__awaiter","NETWORK_ERROR_CODES","includes","status","json","then","catch","e","_getRequestParams","method","options","parameters","body","params","headers","Object","_request","fetcher","url","jwt","qs","query","_a","redirectTo","queryString","keys","length","URLSearchParams","toString","_handleRequest","noResolveJson","data","xform","Promise","resolve","result","ok","_sessionResponse","session","hasSession","expires_at","expires_in","user","_userResponse","_ssoResponse","_generateLinkResponse","action_link","email_otp","hashed_token","redirect_to","verification_type","rest","__rest","properties","_noResolveJsonResponse","access_token","refresh_token"],"sources":["C:\\Users\\mumta\\crewmates\\client\\node_modules\\@supabase\\gotrue-js\\src\\lib\\fetch.ts"],"sourcesContent":["import { expiresAt, looksLikeFetchResponse } from './helpers'\r\nimport {\r\n  AuthResponse,\r\n  SSOResponse,\r\n  GenerateLinkProperties,\r\n  GenerateLinkResponse,\r\n  User,\r\n  UserResponse,\r\n} from './types'\r\nimport { AuthApiError, AuthRetryableFetchError, AuthUnknownError } from './errors'\r\n\r\nexport type Fetch = typeof fetch\r\n\r\nexport interface FetchOptions {\r\n  headers?: {\r\n    [key: string]: string\r\n  }\r\n  noResolveJson?: boolean\r\n}\r\n\r\nexport interface FetchParameters {\r\n  signal?: AbortSignal\r\n}\r\n\r\nexport type RequestMethodType = 'GET' | 'POST' | 'PUT' | 'DELETE'\r\n\r\nconst _getErrorMessage = (err: any): string =>\r\n  err.msg || err.message || err.error_description || err.error || JSON.stringify(err)\r\n\r\nconst handleError = async (error: unknown, reject: (reason?: any) => void) => {\r\n  const NETWORK_ERROR_CODES = [502, 503, 504]\r\n  if (!looksLikeFetchResponse(error)) {\r\n    reject(new AuthRetryableFetchError(_getErrorMessage(error), 0))\r\n  } else if (NETWORK_ERROR_CODES.includes(error.status)) {\r\n    // status in 500...599 range - server had an error, request might be retryed.\r\n    reject(new AuthRetryableFetchError(_getErrorMessage(error), error.status))\r\n  } else {\r\n    // got a response from server that is not in the 500...599 range - should not retry\r\n    error\r\n      .json()\r\n      .then((err) => {\r\n        reject(new AuthApiError(_getErrorMessage(err), error.status || 500))\r\n      })\r\n      .catch((e) => {\r\n        // not a valid json response\r\n        reject(new AuthUnknownError(_getErrorMessage(e), e))\r\n      })\r\n  }\r\n}\r\n\r\nconst _getRequestParams = (\r\n  method: RequestMethodType,\r\n  options?: FetchOptions,\r\n  parameters?: FetchParameters,\r\n  body?: object\r\n) => {\r\n  const params: { [k: string]: any } = { method, headers: options?.headers || {} }\r\n\r\n  if (method === 'GET') {\r\n    return params\r\n  }\r\n\r\n  params.headers = { 'Content-Type': 'application/json;charset=UTF-8', ...options?.headers }\r\n  params.body = JSON.stringify(body)\r\n  return { ...params, ...parameters }\r\n}\r\n\r\ninterface GotrueRequestOptions extends FetchOptions {\r\n  jwt?: string\r\n  redirectTo?: string\r\n  body?: object\r\n  query?: { [key: string]: string }\r\n  /**\r\n   * Function that transforms api response from gotrue into a desirable / standardised format\r\n   */\r\n  xform?: (data: any) => any\r\n}\r\n\r\nexport async function _request(\r\n  fetcher: Fetch,\r\n  method: RequestMethodType,\r\n  url: string,\r\n  options?: GotrueRequestOptions\r\n) {\r\n  const headers = { ...options?.headers }\r\n  if (options?.jwt) {\r\n    headers['Authorization'] = `Bearer ${options.jwt}`\r\n  }\r\n  const qs = options?.query ?? {}\r\n  if (options?.redirectTo) {\r\n    qs['redirect_to'] = options.redirectTo\r\n  }\r\n  const queryString = Object.keys(qs).length ? '?' + new URLSearchParams(qs).toString() : ''\r\n  const data = await _handleRequest(\r\n    fetcher,\r\n    method,\r\n    url + queryString,\r\n    { headers, noResolveJson: options?.noResolveJson },\r\n    {},\r\n    options?.body\r\n  )\r\n  return options?.xform ? options?.xform(data) : { data: { ...data }, error: null }\r\n}\r\n\r\nasync function _handleRequest(\r\n  fetcher: Fetch,\r\n  method: RequestMethodType,\r\n  url: string,\r\n  options?: FetchOptions,\r\n  parameters?: FetchParameters,\r\n  body?: object\r\n): Promise<any> {\r\n  return new Promise((resolve, reject) => {\r\n    fetcher(url, _getRequestParams(method, options, parameters, body))\r\n      .then((result) => {\r\n        if (!result.ok) throw result\r\n        if (options?.noResolveJson) return result\r\n        return result.json()\r\n      })\r\n      .then((data) => resolve(data))\r\n      .catch((error) => handleError(error, reject))\r\n  })\r\n}\r\n\r\nexport function _sessionResponse(data: any): AuthResponse {\r\n  let session = null\r\n  if (hasSession(data)) {\r\n    session = { ...data }\r\n    session.expires_at = expiresAt(data.expires_in)\r\n  }\r\n  const user: User = data.user ?? (data as User)\r\n  return { data: { session, user }, error: null }\r\n}\r\n\r\nexport function _userResponse(data: any): UserResponse {\r\n  const user: User = data.user ?? (data as User)\r\n  return { data: { user }, error: null }\r\n}\r\n\r\nexport function _ssoResponse(data: any): SSOResponse {\r\n  return { data, error: null }\r\n}\r\n\r\nexport function _generateLinkResponse(data: any): GenerateLinkResponse {\r\n  const { action_link, email_otp, hashed_token, redirect_to, verification_type, ...rest } = data\r\n\r\n  const properties: GenerateLinkProperties = {\r\n    action_link,\r\n    email_otp,\r\n    hashed_token,\r\n    redirect_to,\r\n    verification_type,\r\n  }\r\n\r\n  const user: User = { ...rest }\r\n  return {\r\n    data: {\r\n      properties,\r\n      user,\r\n    },\r\n    error: null,\r\n  }\r\n}\r\n\r\nexport function _noResolveJsonResponse(data: any): Response {\r\n  return data\r\n}\r\n\r\n/**\r\n * hasSession checks if the response object contains a valid session\r\n * @param data A response object\r\n * @returns true if a session is in the response\r\n */\r\nfunction hasSession(data: any): boolean {\r\n  return data.access_token && data.refresh_token && data.expires_in\r\n}\r\n"]},"metadata":{},"sourceType":"module"}